/* /css/navigation.css — Classic Skin
   Behavior: unchanged (works with navigation.js)
   Visuals: light, simple, inline desktop; subtle dropdowns; brand-aware colors.
   Uses global.css variables where possible.
*/

/* -----------------------
   Theme bridge to global.css
------------------------ */
:root{
  --nav-bg: var(--primary-color);     /* header background */
  --nav-fg: var(--text-light);        /* link text in header */
  --nav-hover-fg: var(--tertiary-color);
  --nav-border: rgba(0,0,0,0.06);
  --nav-focus: rgba(var(--primary-color-rgb), 0.45);
  --nav-gap: 1rem;
  --nav-drawer-w: 280px;
}

/* Keep logo square, not rounded by global img{} */
.site-header .brand img { border-radius: 0; display:block; }

/* Desktop-first, inline menu */
.nav-menu{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap: var(--nav-gap);
  color: var(--nav-fg);
  background: transparent; /* header.css provides background */
}

.nav-menu ul{ list-style:none; margin:0; padding:0; }
.nav-menu li{ position:relative; }
.nav-menu a{
  display:inline-block;
  text-decoration:none;
  font-weight:600;
  line-height:1.2;
  padding: .5rem .5rem;            /* tighter */
  color: var(--nav-fg);            /* pin to header contrast */
}
.nav-menu a:link,
.nav-menu a:visited,
.nav-menu a:hover,
.nav-menu a:active{ color: var(--nav-fg); }
.nav-menu a:hover{ opacity:.9; }

/* Current page hint (uses your global aria-current styling if any) */
.nav-menu a[aria-current="page"]{
  text-decoration: underline;
  text-underline-offset: 4px;
}

/* Submenus — light, subtle, not chunky */
.nav-root > li > .submenu{
  display:none;
  position:absolute;
  top:100%;
  left:0;
  min-width: 200px;
  margin-top: 6px;
  background: var(--background-card);
  color: var(--text-main);
  border: 1px solid var(--nav-border);
  border-radius: 8px;
  box-shadow: 0 10px 25px rgba(0,0,0,.06);
  padding: 6px 0;
  z-index: 20;
}
.nav-root > li:hover > .submenu{ display:block; }   /* desktop hover */
.is-expanded > .submenu{ display:block; }           /* mobile via JS */

.submenu a{
  color: var(--text-main);
  display:block;
  padding: .45rem .9rem;
  font-weight:500;
}
.submenu a:hover{
  background: var(--background-hover);
  color: var(--text-main);
}

/* Little caret for parents (ARIA toggled by JS on mobile) */
.nav-root > li > a[aria-expanded="true"]::after,
.nav-root > li > a[aria-expanded="false"]::after{
  content: "";
  display:inline-block;
  width: 0; height: 0;
  margin-left: .35em;
  vertical-align: middle;
  border-left: 5px solid transparent;
  border-right:5px solid transparent;
}
.nav-root > li > a[aria-expanded="false"]::after{ border-top:6px solid var(--nav-fg); }
.nav-root > li > a[aria-expanded="true"]::after{ border-bottom:6px solid var(--nav-fg); }

/* Accessibility focus */
.nav-menu a:focus{
  outline: 3px solid var(--nav-focus);
  outline-offset: 2px;
}

/* Mobile toggle — minimal, not styled like a big button */
.menu-toggle{
  display:none;
  background:none;
  border:0;
  padding:.25rem;
  color: var(--text-light);
  cursor:pointer;
}
.menu-toggle:hover,
.menu-toggle:focus{ color: var(--text-light); }
.menu-toggle-box{ display:inline-block; }
.menu-toggle-line{
  width:24px; height:2px; margin:5px 0;
  background: currentColor;
  display:block;
}

/* Mobile drawer — lighter, cleaner, matching your brand */
@media (max-width:1023px){
  .menu-toggle{ display:block; }

  .nav-menu{
    position: fixed;
    top:0; right:0;
    height: 100vh; width: var(--nav-drawer-w);
    flex-direction: column;
    align-items: stretch;
    gap: 0;
    padding: 80px 16px 16px;             /* content clears header area */
    background: var(--background-card);  /* light drawer */
    color: var(--text-main);
    transform: translateX(100%);
    transition: transform .25s ease;
    box-shadow: -12px 0 30px rgba(0,0,0,.12);
    border-left: 1px solid var(--nav-border);
    overflow-y:auto;
    z-index: 1000;
  }
  .nav-menu.open{ transform: translateX(0); }

  html.nav-open, body.nav-open{ overflow:hidden; }

  .nav-root > li{ width:100%; }
  .nav-root > li > a{
    color: var(--text-main);
    padding: .9rem .25rem;
    border-bottom: 1px solid var(--nav-border);
  }

  .submenu{
    position: static;
    background: transparent;
    box-shadow:none;
    border:0;
    margin: 0;
    padding: 0 0 .25rem 0;
  }
  .submenu a{
    padding: .5rem 1rem .5rem 1.25rem;  /* gentle indent */
    border-radius: 6px;
  }
  .submenu a:hover{ background: var(--background-hover); }
}

/* Utilities (icons on right) */
.header-utilities .util-link{
  display:inline-flex; align-items:center; justify-content:center;
  width:34px; height:34px; border-radius:8px; color: var(--text-light);
}
.header-utilities .util-link:hover{ background: rgba(255,255,255,0.12); }
